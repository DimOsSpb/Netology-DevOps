
# Домашнее задание к занятию «Микросервисы: масштабирование»

    Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры.
    Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

    ## Задача 1: Кластеризация

    Предложите решение для обеспечения развёртывания, запуска и управления приложениями.
    Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

    Решение должно соответствовать следующим требованиям:
    - поддержка контейнеров;
    - обеспечивать обнаружение сервисов и маршрутизацию запросов;
    - обеспечивать возможность горизонтального масштабирования;
    - обеспечивать возможность автоматического масштабирования;
    - обеспечивать явное разделение ресурсов, доступных извне и внутри системы;
    - обеспечивать возможность конфигурировать приложения с помощью переменных среды, в том числе с возможностью безопасного хранения чувствительных данных таких как пароли, ключи доступа, ключи шифрования и т. п.

    Обоснуйте свой выбор.

---

## Решение

Опираясь на требования, составим список инструментов для обеспечения развёртывания, запуска и управления приложениями:

1. _поддержка контейнеров;_
    - Прежде всего это Docker или даже Podman т.к. он удобнее для безопасной локальной разработки, CI/CD без демона и rootless сценариев.  
    
А вот из нструментов которые лучше подходит для оркестрации микросервисной архитектуры по всем источникам это - Kubernetes и Docker Swarm, который по многим критериям проигрывает.
Я рассматривал только общепринятые open source решения, OpenShift от Red Hat и тот-же HashiCorp Nomad здесь не рассматривал.  
К тому же на сегодня k8s для крупных и сложных систем K8s всё равно остаётся стандартом, развивается, он хорошо покрывает все нижестоящие требования, open source, отлично документирован.   
Возможно на начальных этапах использовать Docker Swarm, т.к. k8s более сложный и требователен к ресурсам.
    
Итак по пунктам, т.к нам нужно:

2. _обеспечивать обнаружение сервисов и маршрутизацию запросов;_
    - у ``k8s`` встроенное обнаружение сервисов и маршрутизация запросов. Docker swarm имеет service discovery и встроенный балансировщик. Оба подходят но ``K8s`` более гибкий, умеет более сложную маршрутизацию.

3. _обеспечивать возможность горизонтального масштабирования;_
    - ``K8s`` имеет Horizontal Pod Autoscaler по метрикам, а в Docker swarm можно масштабировать сервисы только вручную.

4. _обеспечивать возможность автоматического масштабирования;_
    - ``K8s`` имеет Cluster Autoscaler, swarm nолько ручное масштабирование.

5. _обеспечивать явное разделение ресурсов, доступных извне и внутри системы;_
    - ``K8s`` имеет Namespaces + NetworkPolicies, swarm ограниченные возможности сетевой сегментации

6. _обеспечивать возможность конфигурировать приложения с помощью переменных среды, в том числе с возможностью безопасного хранения чувствительных данных таких как пароли, ключи доступа, ключи шифрования и т. п._
    - ``K8S`` имеет ConfigMaps + Secrets с шифрованием, в swarm Secrets есть, но управление ограничено

**В итоге Kubernetes полностью удовлетворяет всем требованиям как платформа для крупной микросервисной архитектуры, где важны масштабирование, безопасное разделение ресурсов и гибкая маршрутизация. Docker или Podman для работы с контейнерами. GitLab для CI/CD, локальный или облачный.**

---

## Задача 2: Распределённый кеш * (необязательная)

Разработчикам вашей компании понадобился распределённый кеш для организации хранения временной информации по сессиям пользователей.
Вам необходимо построить Redis Cluster, состоящий из трёх шард с тремя репликами.

### Схема:

![11-04-01](img/task.png)

---

### Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---
